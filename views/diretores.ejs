<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Diretores</title>
    <link rel="stylesheet" href="/css/style.css" />
    <script defer src="/js/script.js"></script>
    <!-- Corrigido atributo defer -->
    <style>
      .card-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 25px;
        padding: 20px;
      }
      .card {
        background: #fff;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease;
      }
      .card:hover {
        transform: translateY(-5px);
      }
      .filmes-lista {
        margin-top: 15px;
        padding-left: 20px;
        text-align: left;
      }
      .filmes-lista li {
        margin: 5px 0;
        color: #666;
      }

      .card h2 {
        margin: 10px 0;
      }
      .card p {
        margin: 5px 0;
        color: #555;
      }
      .card .actions {
        margin-top: 10px;
      }
      .card .actions a {
        display: block;
        width: 100%;
        padding: 10px;
        background-color: var(--primary-color);
        color: #fff;
        font-size: 18px;
        font-weight: light;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background 0.3s ease;
        margin-top: 15px;
        font-family: "Broadway", sans-serif;
      }
      .card .actions button {
        text-decoration: none;
        color: white;
        background: #dc3545;
        padding: 5px 10px;
        border-radius: 5px;
        margin: 5px;
        display: inline-block;
      }
      .card .actions a,
      .card .actions button {
        background: #dc3545;
        border: none;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <%- include('partials/header') %>

    <main class="container">
      <h1>Lista de Diretores</h1>
      <a href="/pessoas/novo" class="btn">Adicionar Novo Diretor</a>

      <div
        id="diretor-container"
        class="card-grid"
        data-diretor="<%= JSON.stringify(diretores) %>"
      >
        <% diretores.forEach(diretor => { %>
        <div class="card">
          <div class="person-photo">
            <img
              src="<%= diretor.imagem || '/images/default-person.jpg' %>"
              alt="Foto de <%= diretor.nome %>"
              class="profile-img"
            />
          </div>

          <h2><%= diretor.nome %></h2>

          <div class="detalhes-pessoa">
            <p>
              <strong>Nascimento:</strong> <%= new
              Date(diretor.data_nascimento).toLocaleDateString('pt-BR') %>
            </p>
            <p><strong>Sexo:</strong> <%= diretor.sexo %></p>
            <p><strong>Nacionalidade:</strong> <%= diretor.nacionalidade %></p>

            <% if (diretor.filmes && diretor.filmes.length > 0) { %>
            <div class="filmes-lista">
              <strong>Filmes Produzidos:</strong>
              <ul>
                <% diretor.filmes.forEach(filme => { %>
                <li>
                  <%= filme.titulo %> <% if (filme.ano_lancamento) { %> (<%=
                  filme.ano_lancamento %>) <% } %>
                </li>
                <% }); %>
              </ul>
            </div>
            <% } %>
          </div>

          <div class="actions">
            <a href="/pessoas/editar/<%= diretor.id %>" class="btn-editar"
              >Editar</a
            >
            <form action="/pessoas/deletar/<%= diretor.id %>" method="POST">
              <button type="submit" class="btn-excluir">Excluir</button>
            </form>
          </div>
        </div>
        <% }); %>
      </div>
    </main>

    <%- include('partials/toggle') %>
  </body>
</html>
